---
import { formatAge, birthYear } from "@siteage/shared";
import type { DomainDetail } from "@siteage/shared";

interface Props {
  data: DomainDetail;
}

const { data } = Astro.props;
const birth = data.verified_birth_at || data.birth_at;
const isVerified = data.verification_status === "verified";
---

<div id="certificate" class="bg-white border-2 border-gray-200 rounded-xl p-8 shadow-sm max-w-2xl mx-auto relative overflow-hidden">
  <!-- Decorative border pattern -->
  <div class="absolute inset-0 border-8 border-double border-gray-100 rounded-xl pointer-events-none"></div>

  <div class="relative text-center">
    <!-- Header -->
    <div class="mb-6">
      <p class="text-xs uppercase tracking-widest text-gray-400 mb-1">Certificate of Website Longevity</p>
      <div class="w-16 h-0.5 bg-gray-300 mx-auto"></div>
    </div>

    <!-- Domain -->
    <h1 class="text-3xl font-bold mb-2">{data.domain}</h1>

    <!-- Verification badge -->
    {isVerified && (
      <div class="inline-flex items-center gap-1 px-3 py-1 bg-yellow-50 border border-yellow-200 rounded-full text-yellow-700 text-sm mb-4">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
        </svg>
        Verified Owner
      </div>
    )}

    <!-- Birth date -->
    {birth ? (
      <div class="my-6">
        <p class="text-sm text-gray-500 mb-1">{isVerified ? "Established" : "Online since"}</p>
        <p class="text-5xl font-light text-gray-800">{birthYear(birth)}</p>
        <p class="text-sm text-gray-400 mt-1">{new Date(birth).toLocaleDateString("en-US", { year: "numeric", month: "long", day: "numeric" })}</p>
      </div>
    ) : (
      <div class="my-6">
        <p class="text-2xl text-gray-400">Birth date unknown</p>
      </div>
    )}

    <!-- Age -->
    {birth && (
      <p class="text-lg text-gray-600">
        Age: <span class="font-semibold">{formatAge(birth)}</span>
      </p>
    )}

    <!-- Footer -->
    <div class="mt-8 pt-4 border-t border-gray-100">
      <p class="text-xs text-gray-400">Certified by SiteAge.org &middot; Data from Internet Archive Wayback Machine</p>
    </div>
  </div>
</div>
