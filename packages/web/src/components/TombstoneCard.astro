---
import { formatAge, birthYear } from "@siteage/shared";
import type { DomainDetail } from "@siteage/shared";

interface Props {
  data: DomainDetail;
}

const { data } = Astro.props;
const birth = data.verified_birth_at || data.birth_at;
const deathYear = data.death_at ? birthYear(data.death_at) : "?";
---

<div class="relative bg-gradient-to-b from-parchment-dark/60 to-parchment-dark/80 border border-divider p-10 sm:p-14 max-w-2xl mx-auto overflow-hidden noise-overlay shadow-[inset_0_2px_12px_rgba(0,0,0,0.06),var(--shadow-card)]">
  <!-- Corner ornaments (muted) -->
  <div class="absolute top-3 left-3 w-10 h-10 border-t-2 border-l-2 border-tombstone/20"></div>
  <div class="absolute top-3 right-3 w-10 h-10 border-t-2 border-r-2 border-tombstone/20"></div>
  <div class="absolute bottom-3 left-3 w-10 h-10 border-b-2 border-l-2 border-tombstone/20"></div>
  <div class="absolute bottom-3 right-3 w-10 h-10 border-b-2 border-r-2 border-tombstone/20"></div>

  <div class="absolute inset-6 border border-tombstone/10 pointer-events-none"></div>

  <div class="relative text-center">
    <div class="mb-8">
      <p class="text-[10px] tracking-[0.4em] uppercase text-tombstone font-medium mb-2">In Memoriam</p>
      <div class="h-px max-w-48 mx-auto bg-gradient-to-r from-transparent via-tombstone/40 to-transparent"></div>
    </div>

    <h1 class="font-display text-3xl sm:text-4xl mb-6 text-tombstone">{data.domain}</h1>

    <div class="my-8">
      <p class="font-display text-5xl text-tombstone/70 leading-none mb-3 drop-shadow-[0_2px_4px_rgba(0,0,0,0.1)]">R.I.P</p>
      {birth && (
        <p class="font-display text-2xl text-tombstone/50 mt-4">
          {birthYear(birth)} &mdash; {deathYear}
        </p>
      )}
      {birth && (
        <p class="text-sm text-tombstone/40 mt-3 font-light">
          Survived for {formatAge(birth, data.death_at || undefined)}
        </p>
      )}
    </div>

    <div class="pt-6 border-t border-tombstone/10">
      <p class="text-[10px] text-tombstone/30 tracking-[0.15em] uppercase">Remembered by SiteAge.org &middot; Data from Internet Archive</p>
    </div>
  </div>
</div>
